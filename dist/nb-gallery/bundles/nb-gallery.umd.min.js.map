{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://nb-gallery/lib/nb-gallery-action/nb-gallery-action.component.ts","ng://nb-gallery/lib/nb-gallery-arrows/nb-gallery-arrows.component.ts","ng://nb-gallery/lib/nb-gallery-bullets/nb-gallery-bullets.component.ts","ng://nb-gallery/lib/nb-gallery-helper.service.ts","ng://nb-gallery/lib/models/nb-gallery-animation.model.ts","ng://nb-gallery/lib/nb-gallery-item/nb-gallery-item.component.ts","ng://nb-gallery/lib/nb-gallery-video/nb-gallery-video.component.ts","ng://nb-gallery/lib/nb-gallery-video/nb-gallery-iframe.component.ts","ng://nb-gallery/lib/nb-gallery-video/nb-gallery-tag.component.ts","ng://nb-gallery/lib/models/nb-gallery-order.model.ts","ng://nb-gallery/lib/nb-gallery-thumbnails/nb-gallery-thumbnails.component.ts","ng://nb-gallery/lib/nb-gallery-preview/nb-gallery-preview.component.ts","ng://nb-gallery/lib/models/nb-gallery-image-size.model.ts","ng://nb-gallery/lib/models/nb-gallery-layout.model.ts","ng://nb-gallery/lib/models/nb-gallery-action.model.ts","ng://nb-gallery/lib/models/nb-gallery-options.model.ts","ng://nb-gallery/lib/models/nb-gallery-thumbnail.model.ts","ng://nb-gallery/lib/models/nb-gallery-ordered-item.model.ts","ng://nb-gallery/lib/nb-gallery.component.ts","ng://nb-gallery/lib/models/nb-gallery-item.model.ts","ng://nb-gallery/lib/models/nb-gallery-ordered-image.model.ts","ng://nb-gallery/lib/nb-gallery.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","NbGalleryActionComponent","EventEmitter","prototype","handleClick","event","this","disabled","onClick","emit","stopPropagation","preventDefault","Component","args","selector","template","changeDetection","ChangeDetectionStrategy","OnPush","Input","Output","NbGalleryArrowsComponent","handlePrevClick","onPrevClick","handleNextClick","onNextClick","NbGalleryBulletsComponent","getBullets","count","handleChange","index","onChange","NbGalleryHelperService","renderer","Map","manageSwipe","status","element","id","nextHandler","prevHandler","handlers","getSwipeHandlers","swipeHandlers","set","listen","nativeElement","map","handler","removeSwipeHandlers","validateUrl","url","replace","RegExp","getBackgroundUrl","image","get","delete","Injectable","Renderer","NbGalleryItemComponent","sanitization","elementRef","helperService","ngOnInit","arrows","arrowsAutoHide","autoPlay","startAutoPlay","ngOnChanges","changes","_this","swipe","showNext","showPrev","onMouseEnter","autoPlayPauseOnHover","stopAutoPlay","onMouseLeave","reset","selectedIndex","getItems","items","lazyLoading","indexes_1","prevIndex","infinityMove","length","nextIndex","filter","img","indexOf","timer","setInterval","autoPlayInterval","clearInterval","clickable","show","onActiveChange","setChangeTimeout","canShowNext","canChangeImage","canShowPrev","timeout","animation","NbGalleryAnimation","Slide","Fade","setTimeout","getSafeUrl","bypassSecurityTrustStyle","DomSanitizer","ElementRef","HostListener","NbGalleryVideoComponent","videoItem","source","src","NbGalleryIframeComponent","_sanitizer","defineProperty","shouldPause","iframe","iframeSrc","bypassSecurityTrustResourceUrl","ViewChild","NbGalleryTagComponent","video","paused","pause","NbGalleryThumbnailsComponent","validateIndex","moveRight","moveLeft","remainingCountValue","rows","columns","mouseenter","setDefaultPosition","remainingCount","slice","order","NbGalleryOrder","Row","stopIndex","Column","moveSize","Page","minStopIndex","hasLink","links","canMoveRight","maxIndex","getMaxIndex","setThumbnailsPosition","canMoveLeft","getThumbnailLeft","calculatedIndex","Math","floor","ceil","getThumbnailPosition","getThumbnailTop","getThumbnailWidth","getThumbnailDimension","getThumbnailHeight","thumbnailsLeft","thumbnailsMarginLeft","margin","canShowArrows","getVisibleCount","newIndex","getSafeStyle","NbGalleryPreviewComponent","changeDetectorRef","ngOnDestroy","keyDownListener","onKeyDown","isOpen","keyboardNavigation","isKeyboardPrev","isKeyboardNext","closeOnEsc","isKeyboardEsc","close","open","onOpen","forceFullscreen","manageFullscreen","listenGlobal","closeFullscreen","onClose","imageMouseEnter","imageMouseLeave","clearTimeout","showAtIndex","loading","fullscreen","doc","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","openFullscreen","substr","bypassSecurityTrustUrl","zoomIn","canZoomIn","zoomValue","zoomStep","zoomMax","zoomOut","canZoomOut","zoomMin","resetPosition","rotateLeft","rotateValue","rotateRight","getTransform","canDragOnZoom","zoom","mouseDownHandler","initialX","getClientX","initialY","getClientY","initialLeft","positionLeft","initialTop","positionTop","isMove","mouseUpHandler","mouseMoveHandler","touches","clientX","clientY","keyCode","document","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","first","_show","console","log","type","undefined","item","srcIndex","description","descriptions","markForCheck","updateOnVideo","updateOnImage","isImgLoaded","complete","naturalWidth","previewImage","showSpinner","onload","ChangeDetectorRef","NbGalleryAction","action","icon","titleText","NbGalleryOptions","obj","preventDefaults","breakpoint","use","defaultValue","width","height","fullWidth","layout","NbGalleryLayout","ThumbnailsBottom","startIndex","linkTarget","itemPercent","itemArrows","itemArrowsAutoHide","itemSwipe","itemAnimation","itemSize","NbGalleryImageSize","Cover","itemAutoPlay","itemAutoPlayInterval","itemAutoPlayPauseOnHover","itemInfinityMove","itemActions","itemDescription","itemBullets","thumbnails","defaultVideoThumbnnailUrl","thumbnailsColumns","thumbnailsRows","thumbnailsPercent","thumbnailsMargin","thumbnailsArrows","thumbnailsArrowsAutoHide","thumbnailsSwipe","thumbnailsMoveSize","thumbnailsOrder","thumbnailsRemainingCount","thumbnailsAsLinks","thumbnailsAutoHide","thumbnailMargin","thumbnailSize","thumbnailActions","preview","previewDescription","previewSwipe","previewFullscreen","previewForceFullscreen","previewCloseOnClick","previewCloseOnEsc","previewKeyboardNavigation","previewAnimation","previewAutoPlay","previewAutoPlayInterval","previewAutoPlayPauseOnHover","previewInfinityMove","previewZoom","previewZoomStep","previewZoomMax","previewZoomMin","previewRotate","previewDownload","previewCustom","previewBullets","arrowPrevIcon","arrowNextIcon","closeIcon","fullscreenIcon","spinnerIcon","zoomInIcon","zoomOutIcon","rotateLeftIcon","rotateRightIcon","downloadIcon","actions","NbGalleryThumbnail","NbGalleryOrderedItem","NbGalleryComponent","myElement","options","opt","sortOptions","setBreakpoint","setOptions","checkFullWidth","currentOptions","ngDoCheck","oldItemsLength","oldItems","setItems","itemsReady","resetThumbnails","ngAfterViewInit","onResize","prevBreakpoint","fullWidthTimeout","getItemHeight","getThumbnailsHeight","getThumbnailsMarginTop","getThumbnailsMarginBottom","ThumbnailsTop","openPreview","previewEnabled","onPreviewOpen","previewOpen","onPreviewClose","previewClose","selectFromItem","select","selectFromThumbnails","previewSelect","previewChange","moveThumbnailsRight","thumbnail","moveThumbnailsLeft","canMoveThumbnailsRight","canMoveThumbnailsLeft","change","body","clientWidth","left","parentNode","innerWidth","small","galleryItems","medium","previewItems","big","labels","breakpoints","window","pop","__spread","arguments","concat","a","sort","combineOptions","second","keys","val","providers","HostBinding","NbGalleryItem","label","NbGalleryOrderedImage","CustomHammerConfig","_super","pinch","enable","rotate","__extends","__","constructor","create","tslib_1.__extends","HammerGestureConfig","NbGalleryModule","NgModule","imports","CommonModule","declarations","exports","provide","HAMMER_GESTURE_CONFIG","useClass"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n    selector: 'nb-gallery-action',\n    template: `\n        <div class=\"nb-gallery-icon\" [class.nb-gallery-icon-disabled]=\"disabled\"\n            aria-hidden=\"true\"\n            title=\"{{ titleText }}\"\n            (click)=\"handleClick($event)\">\n                <i class=\"nb-gallery-icon-content {{ icon }}\"></i>\n        </div>`,\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NbGalleryActionComponent {\n    @Input() icon: string;\n    @Input() disabled = false;\n    @Input() titleText = '';\n\n    @Output() onClick: EventEmitter<Event> = new EventEmitter();\n\n    handleClick(event: Event) {\n        if (!this.disabled) {\n            this.onClick.emit(event);\n        }\n\n        event.stopPropagation();\n        event.preventDefault();\n    }\n}\n","import { Component, Input, Output, EventEmitter, } from '@angular/core';\n\n@Component({\n    selector: 'nb-gallery-arrows',\n    template: `\n        <div class=\"nb-gallery-arrow-wrapper nb-gallery-arrow-left\">\n            <div class=\"nb-gallery-icon nb-gallery-arrow\" aria-hidden=\"true\" (click)=\"handlePrevClick()\" [class.nb-gallery-disabled]=\"prevDisabled\">\n                <i class=\"nb-gallery-icon-content {{arrowPrevIcon}}\"></i>\n            </div>\n        </div>\n        <div class=\"nb-gallery-arrow-wrapper nb-gallery-arrow-right\">\n            <div class=\"nb-gallery-icon nb-gallery-arrow\" aria-hidden=\"true\" (click)=\"handleNextClick()\" [class.nb-gallery-disabled]=\"nextDisabled\">\n                <i class=\"nb-gallery-icon-content {{arrowNextIcon}}\"></i>\n            </div>\n        </div>\n    `,\n    styleUrls: ['./nb-gallery-arrows.component.scss']\n})\nexport class NbGalleryArrowsComponent {\n    @Input() prevDisabled: boolean;\n    @Input() nextDisabled: boolean;\n    @Input() arrowPrevIcon: string;\n    @Input() arrowNextIcon: string;\n\n    @Output() onPrevClick = new EventEmitter();\n    @Output() onNextClick = new EventEmitter();\n\n    handlePrevClick(): void {\n        this.onPrevClick.emit();\n    }\n\n    handleNextClick(): void {\n        this.onNextClick.emit();\n    }\n}\n","import { Component, Input, Output, EventEmitter, } from '@angular/core';\n\n@Component({\n    selector: 'nb-gallery-bullets',\n    template: `\n        <div class=\"nb-gallery-bullet\" *ngFor=\"let bullet of getBullets(); let i = index;\" (click)=\"handleChange($event, i)\" [ngClass]=\"{ 'nb-gallery-active': i == active }\"></div>\n    `,\n    styleUrls: ['./nb-gallery-bullets.component.scss']\n})\nexport class NbGalleryBulletsComponent {\n    @Input() count: number;\n    @Input() active: number = 0;\n\n    @Output() onChange = new EventEmitter();\n\n    getBullets(): number[] {\n        return Array(this.count);\n    }\n\n    handleChange(event: Event, index: number): void {\n        this.onChange.emit(index);\n    }\n}\n","import { Injectable, ElementRef, Renderer } from '@angular/core';\n\n@Injectable()\nexport class NbGalleryHelperService {\n\n    private swipeHandlers: Map<string, Function[]> = new Map<string, Function[]>();\n\n    constructor(private renderer: Renderer) {}\n\n    manageSwipe(status: boolean, element: ElementRef, id: string, nextHandler: Function, prevHandler: Function): void {\n\n        const handlers = this.getSwipeHandlers(id);\n\n        // swipeleft and swiperight are available only if hammerjs is included\n        try {\n            if (status && !handlers) {\n                this.swipeHandlers.set(id, [\n                    this.renderer.listen(element.nativeElement, 'swipeleft', () => nextHandler()),\n                    this.renderer.listen(element.nativeElement, 'swiperight', () => prevHandler()),\n                    this.renderer.listen(element.nativeElement, 'swipeup', () => prevHandler()),\n                    this.renderer.listen(element.nativeElement, 'swipedown', () => prevHandler()),\n                ]);\n            } else if (!status && handlers) {\n                handlers.map((handler) => handler());\n                this.removeSwipeHandlers(id);\n            }\n        } catch (e) {}\n    }\n\n    validateUrl(url: string): string {\n        if (url.replace) {\n            return url.replace(new RegExp(' ', 'g'), '%20')\n                .replace(new RegExp('\\'', 'g'), '%27');\n        } else {\n            return url;\n        }\n    }\n\n    getBackgroundUrl(image: string) {\n        return 'url(\\'' + this.validateUrl(image) + '\\')';\n    }\n\n    private getSwipeHandlers(id: string): Function[] | undefined {\n        return this.swipeHandlers.get(id);\n    }\n\n    private removeSwipeHandlers(id: string): void {\n        this.swipeHandlers.delete(id);\n    }\n}\n","export class NbGalleryAnimation {\n    static Fade = 'fade';\n    static Slide = 'slide';\n    static Rotate = 'rotate';\n    static Zoom = 'zoom';\n}\n","import { Component, Input, Output, EventEmitter, HostListener,  ElementRef, OnInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\n\nimport { NbGalleryHelperService } from '../nb-gallery-helper.service';\nimport { NbGalleryAnimation } from '../models/nb-gallery-animation.model';\nimport { NbGalleryAction } from '../models/nb-gallery-action.model';\nimport { NbGalleryOrderedItem } from '../models/nb-gallery-ordered-item.model';\n\n@Component({\n    selector: 'nb-gallery-item',\n    template: `\n        <div class=\"nb-gallery-item-wrapper nb-gallery-animation-{{animation}} nb-gallery-item-size-{{size}}\">\n            <div class=\"nb-gallery-item\" *ngFor=\"let item of getItems(); let i = index;\" [ngClass]=\"{ 'nb-gallery-active': selectedIndex == item.index, 'nb-gallery-inactive-left': selectedIndex > item.index, 'nb-gallery-inactive-right': selectedIndex < item.index, 'nb-gallery-clickable': clickable }\" (click)=\"handleClick($event, item.index)\">\n                <div *ngIf=\"item.type === 'image'\" class=\"nb-gallery-item-image\" [style.background-image]=\"getSafeUrl(item.url)\"></div>\n                <nb-gallery-video *ngIf=\"item.type === 'video'\" [videoItem]=\"item\" [pause]=\"selectedIndex !== item.index\" class=\"nb-gallery-item-video\"></nb-gallery-video>\n                <div class=\"nb-gallery-icons-wrapper\">\n                    <nb-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, item.index)\"></nb-gallery-action>\n                </div>\n                <div class=\"nb-gallery-item-text\" *ngIf=\"showDescription && descriptions[item.index]\" [innerHTML]=\"descriptions[item.index]\" (click)=\"$event.stopPropagation()\"></div>\n            </div>\n        </div>\n        <nb-gallery-bullets *ngIf=\"bullets\" [count]=\"items.length\" [active]=\"selectedIndex\" (onChange)=\"show($event)\"></nb-gallery-bullets>\n        <nb-gallery-arrows class=\"nb-gallery-item-size-{{size}}\" *ngIf=\"arrows\" (onPrevClick)=\"showPrev()\" (onNextClick)=\"showNext()\" [prevDisabled]=\"!canShowPrev()\" [nextDisabled]=\"!canShowNext()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></nb-gallery-arrows>\n    `,\n    styleUrls: ['./nb-gallery-item.component.scss']\n})\nexport class NbGalleryItemComponent implements OnInit, OnChanges {\n    @Input() items: NbGalleryOrderedItem[];\n    @Input() clickable: boolean;\n    @Input() selectedIndex: number;\n    @Input() arrows: boolean;\n    @Input() arrowsAutoHide: boolean;\n    @Input() swipe: boolean;\n    @Input() animation: string;\n    @Input() size: string;\n    @Input() arrowPrevIcon: string;\n    @Input() arrowNextIcon: string;\n    @Input() autoPlay: boolean;\n    @Input() autoPlayInterval: number;\n    @Input() autoPlayPauseOnHover: boolean;\n    @Input() infinityMove: boolean;\n    @Input() lazyLoading: boolean;\n    @Input() actions: NbGalleryAction[];\n    @Input() descriptions: string[];\n    @Input() showDescription: boolean;\n    @Input() bullets: boolean;\n    @Input() bgColor: string;\n\n    @Output() onClick = new EventEmitter();\n    @Output() onActiveChange = new EventEmitter();\n\n    canChangeImage = true;\n\n    private timer;\n\n    constructor(private sanitization: DomSanitizer,\n        private elementRef: ElementRef, private helperService: NbGalleryHelperService) {}\n\n    ngOnInit(): void {\n        if (this.arrows && this.arrowsAutoHide) {\n            this.arrows = false;\n        }\n\n        if (this.autoPlay) {\n            this.startAutoPlay();\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes['swipe']) {\n            this.helperService.manageSwipe(this.swipe, this.elementRef, 'image', () => this.showNext(), () => this.showPrev());\n        }\n    }\n\n    @HostListener('mouseenter') onMouseEnter() {\n        if (this.arrowsAutoHide && !this.arrows) {\n            this.arrows = true;\n        }\n\n        if (this.autoPlay && this.autoPlayPauseOnHover) {\n            this.stopAutoPlay();\n        }\n    }\n\n    @HostListener('mouseleave') onMouseLeave() {\n        if (this.arrowsAutoHide && this.arrows) {\n            this.arrows = false;\n        }\n\n        if (this.autoPlay && this.autoPlayPauseOnHover) {\n            this.startAutoPlay();\n        }\n    }\n\n    reset(index: number): void {\n        this.selectedIndex = index;\n    }\n\n    getItems(): NbGalleryOrderedItem[] {\n        if (!this.items) {\n            return [];\n        }\n\n        if (this.lazyLoading) {\n            const indexes = [this.selectedIndex];\n            const prevIndex = this.selectedIndex - 1;\n\n            if (prevIndex === -1 && this.infinityMove) {\n                indexes.push(this.items.length - 1);\n            } else if (prevIndex >= 0) {\n                indexes.push(prevIndex);\n            }\n\n            const nextIndex = this.selectedIndex + 1;\n\n            if (nextIndex === this.items.length && this.infinityMove) {\n                indexes.push(0);\n            } else if (nextIndex < this.items.length) {\n                indexes.push(nextIndex);\n            }\n\n            return this.items.filter((img, i) => indexes.indexOf(i) != -1);\n        } else {\n            return this.items;\n        }\n    }\n\n    startAutoPlay(): void {\n        this.stopAutoPlay();\n\n        this.timer = setInterval(() => {\n            if (!this.showNext()) {\n                this.selectedIndex = -1;\n                this.showNext();\n            }\n        }, this.autoPlayInterval);\n    }\n\n    stopAutoPlay() {\n        if (this.timer) {\n            clearInterval(this.timer);\n        }\n    }\n\n    handleClick(event: Event, index: number): void {\n        if (this.clickable) {\n            this.onClick.emit(index);\n\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    }\n\n    show(index: number) {\n        this.selectedIndex = index;\n        this.onActiveChange.emit(this.selectedIndex);\n        this.setChangeTimeout();\n    }\n\n    showNext(): boolean {\n        if (this.canShowNext() && this.canChangeImage) {\n            this.selectedIndex++;\n\n            if (this.selectedIndex === this.items.length) {\n                this.selectedIndex = 0;\n            }\n\n            this.onActiveChange.emit(this.selectedIndex);\n            this.setChangeTimeout();\n\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    showPrev(): void {\n        if (this.canShowPrev() && this.canChangeImage) {\n            this.selectedIndex--;\n\n            if (this.selectedIndex < 0) {\n                this.selectedIndex = this.items.length - 1;\n            }\n\n            this.onActiveChange.emit(this.selectedIndex);\n            this.setChangeTimeout();\n        }\n    }\n\n    setChangeTimeout() {\n        this.canChangeImage = false;\n        let timeout = 1000;\n\n        if (this.animation === NbGalleryAnimation.Slide\n            || this.animation === NbGalleryAnimation.Fade) {\n                timeout = 500;\n        }\n\n        setTimeout(() => {\n            this.canChangeImage = true;\n        }, timeout);\n    }\n\n    canShowNext(): boolean {\n        if (this.items) {\n            return this.infinityMove || this.selectedIndex < this.items.length - 1\n                ? true : false;\n        } else {\n            return false;\n        }\n    }\n\n    canShowPrev(): boolean {\n        if (this.items) {\n            return this.infinityMove || this.selectedIndex > 0 ? true : false;\n        } else {\n            return false;\n        }\n    }\n\n    getSafeUrl(image: string): SafeStyle {\n        return this.sanitization.bypassSecurityTrustStyle(this.helperService.getBackgroundUrl(image));\n    }\n}\n","import { Component, Input, Output, EventEmitter, HostListener,  ElementRef, OnInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\nimport { NbGalleryItem } from '../models/nb-gallery-item.model';\n\n//\n@Component({\n    selector: 'nb-gallery-video',\n    template: `\n    <nb-gallery-iframe\n        *ngIf=\"(videoItem.source === 'youtube' ||videoItem.source === 'vimeo')\"\n        [pause]=\"pause\" [src]=\"src\">\n    </nb-gallery-iframe>\n    <nb-gallery-tag *ngIf=\"videoItem.source === 'memory'\" [pause]=\"pause\" [src]=\"src\"></nb-gallery-tag>\n        `,\n    styleUrls: ['./nb-gallery-video.component.scss']\n})\nexport class NbGalleryVideoComponent implements OnInit {\n    @Input() videoItem: NbGalleryItem;\n    @Input() pause: Boolean;\n\n    src: string;\n\n    constructor() {\n\n    }\n\n    ngOnInit() {\n        switch (this.videoItem.source) {\n            case 'youtube':\n                this.src = \"https://www.youtube.com/embed/\" + this.videoItem.url;\n                break;\n            case 'vimeo':\n                this.src = \"https://player.vimeo.com/video/\" + this.videoItem.url;\n                break;\n            case 'memory':\n                this.src = this.videoItem.url;\n                break;\n        }\n    }\n\n\n}\n","import { Component, Input, Output, EventEmitter, ViewChild,  ElementRef, OnInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n\n@Component({\n    selector: 'nb-gallery-iframe',\n    template: `\n    <iframe #iframe\n            frameborder=\"0\"\n            allowfullscreen\n            class=\"nb-gallery-video\"\n            [src]=\"iframeSrc\">\n    </iframe>\n        `,\n    styleUrls: ['./nb-gallery-video.component.scss']\n})\nexport class NbGalleryIframeComponent implements OnInit {\n    @Input() src: string;\n\n    @Input('pause') set pauseVideo(shouldPause: boolean) {\n        const iframe: HTMLIFrameElement = this.iframe.nativeElement;\n        if (shouldPause) {\n          const src = iframe.src;\n          iframe.src = src;\n        }\n      }\n\n    iframeSrc: SafeResourceUrl;\n\n    @ViewChild('iframe') iframe: ElementRef;\n\n  constructor(private _sanitizer: DomSanitizer) { }\n\n    ngOnInit() {\n        this.iframeSrc = this._sanitizer.bypassSecurityTrustResourceUrl(this.src);\n    }\n}\n","import { Component, Input, Output, EventEmitter, ViewChild,  ElementRef, OnInit, OnChanges, SimpleChanges } from '@angular/core';\n@Component({\n    selector: 'nb-gallery-tag',\n    template: `\n    <video #video class=\"nb-gallery-video\" controls (error)=\"error.emit($event)\">\n      <source src=\"{{src}}\"/>\n    </video>\n        `,\n    styleUrls: ['./nb-gallery-video.component.scss']\n})\nexport class NbGalleryTagComponent {\n    @Input() src: string;\n\n  @Input('pause') set pauseVideo(shouldPause: boolean) {\n    const video: HTMLVideoElement = this.video.nativeElement;\n    if (shouldPause && !video.paused) {\n      video.pause();\n    }\n  }\n\n  /** Stream that emits when an error occurs */\n  @Output() error = new EventEmitter<Error>();\n\n  @ViewChild('video') video: ElementRef;\n}\n","export class NbGalleryOrder {\n    static Column = 1;\n    static Row = 2;\n    static Page = 3;\n}\n","import { Component, Input, Output, EventEmitter, HostListener, OnChanges, SimpleChanges, ElementRef } from '@angular/core';\nimport { DomSanitizer, SafeStyle, SafeResourceUrl } from '@angular/platform-browser';\n\nimport { NbGalleryHelperService } from '../nb-gallery-helper.service';\nimport { NbGalleryOrder } from '../models/nb-gallery-order.model';\nimport { NbGalleryAction } from '../models/nb-gallery-action.model';\nimport { NbGalleryThumbnail } from '../models/nb-gallery-thumbnail.model';\n\n@Component({\n    selector: 'nb-gallery-thumbnails',\n    template: `\n    <div class=\"nb-gallery-thumbnails-wrapper nb-gallery-thumbnail-size-{{size}}\">\n        <div class=\"nb-gallery-thumbnails\" [style.transform]=\"'translateX(' + thumbnailsLeft + ')'\" [style.marginLeft]=\"thumbnailsMarginLeft\">\n            <a [href]=\"hasLink(i) ? links[i] : '#'\" [target]=\"linkTarget\" class=\"nb-gallery-thumbnail\" *ngFor=\"let item of getItems(); let i = index;\" [style.background-image]=\"getSafeUrl(item.url)\" (click)=\"handleClick($event, i)\" [style.width]=\"getThumbnailWidth()\" [style.height]=\"getThumbnailHeight()\" [style.left]=\"getThumbnailLeft(i)\" [style.top]=\"getThumbnailTop(i)\" [ngClass]=\"{ 'nb-gallery-active': i == selectedIndex, 'nb-gallery-clickable': clickable }\" [attr.aria-label]=\"labels[i]\">\n                <div class=\"nb-gallery-icons-wrapper\">\n                    <nb-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, i)\"></nb-gallery-action>\n                </div>\n                <div class=\"nb-gallery-remaining-count-overlay\" *ngIf=\"remainingCount && remainingCountValue && (i == (rows * columns) - 1)\">\n                    <span class=\"nb-gallery-remaining-count\">+{{remainingCountValue}}</span>\n                </div>\n            </a>\n        </div>\n    </div>\n    <nb-gallery-arrows *ngIf=\"canShowArrows()\" (onPrevClick)=\"moveLeft()\" (onNextClick)=\"moveRight()\" [prevDisabled]=\"!canMoveLeft()\" [nextDisabled]=\"!canMoveRight()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></nb-gallery-arrows>\n    `,\n    styleUrls: ['./nb-gallery-thumbnails.component.scss']\n})\nexport class NbGalleryThumbnailsComponent implements OnChanges {\n\n    thumbnailsLeft: string;\n    thumbnailsMarginLeft: string;\n    mouseenter: boolean;\n    remainingCountValue: number;\n\n    minStopIndex = 0;\n\n    @Input() items: NbGalleryThumbnail[];\n    @Input() links: string[];\n    @Input() labels: string[];\n    @Input() linkTarget: string;\n    @Input() columns: number;\n    @Input() rows: number;\n    @Input() arrows: boolean;\n    @Input() arrowsAutoHide: boolean;\n    @Input() margin: number;\n    @Input() selectedIndex: number;\n    @Input() clickable: boolean;\n    @Input() swipe: boolean;\n    @Input() size: string;\n    @Input() arrowPrevIcon: string;\n    @Input() arrowNextIcon: string;\n    @Input() moveSize: number;\n    @Input() order: number;\n    @Input() remainingCount: boolean;\n    @Input() lazyLoading: boolean;\n    @Input() actions: NbGalleryAction[];\n\n    @Output() onActiveChange = new EventEmitter();\n\n    private index = 0;\n\n    constructor(private sanitization: DomSanitizer, private elementRef: ElementRef,\n        private helperService: NbGalleryHelperService) {}\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes['selectedIndex']) {\n            this.validateIndex();\n        }\n\n        if (changes['swipe']) {\n            this.helperService.manageSwipe(this.swipe, this.elementRef,\n            'thumbnails', () => this.moveRight(), () => this.moveLeft());\n        }\n\n        if (this.items) {\n            this.remainingCountValue = this.items.length - (this.rows * this.columns);\n        }\n    }\n\n    @HostListener('mouseenter') onMouseEnter() {\n        this.mouseenter = true;\n    }\n\n    @HostListener('mouseleave') onMouseLeave() {\n        this.mouseenter = false;\n    }\n\n    reset(index: number): void {\n        this.selectedIndex = index;\n        this.setDefaultPosition();\n\n        this.index = 0;\n        this.validateIndex();\n    }\n\n    getItems(): string[] | SafeResourceUrl[] {\n        if (!this.items) {\n            return [];\n        }\n\n        if (this.remainingCount) {\n            return this.items.slice(0, this.rows * this.columns);\n        } else if (this.lazyLoading && this.order !== NbGalleryOrder.Row) {\n            let stopIndex = 0;\n\n            if (this.order === NbGalleryOrder.Column) {\n                stopIndex = (this.index + this.columns + this.moveSize) * this.rows;\n            } else if (this.order === NbGalleryOrder.Page) {\n                stopIndex = this.index + ((this.columns * this.rows) * 2);\n            }\n\n            if (stopIndex <= this.minStopIndex) {\n                stopIndex = this.minStopIndex;\n            } else {\n                this.minStopIndex = stopIndex;\n            }\n\n            return this.items.slice(0, stopIndex);\n        } else {\n            return this.items;\n        }\n    }\n\n    handleClick(event: Event, index: number): void {\n        if (!this.hasLink(index)) {\n            this.selectedIndex = index;\n            this.onActiveChange.emit(index);\n\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    }\n\n    hasLink(index: number): boolean {\n        if (this.links && this.links.length && this.links[index]) return true;\n    }\n\n    moveRight(): void {\n        if (this.canMoveRight()) {\n            this.index += this.moveSize;\n            const maxIndex = this.getMaxIndex() - this.columns;\n\n            if (this.index > maxIndex) {\n                this.index = maxIndex;\n            }\n\n            this.setThumbnailsPosition();\n        }\n    }\n\n    moveLeft(): void {\n        if (this.canMoveLeft()) {\n            this.index -= this.moveSize;\n\n            if (this.index < 0) {\n                this.index = 0;\n            }\n\n            this.setThumbnailsPosition();\n        }\n    }\n\n    canMoveRight(): boolean {\n        return this.index + this.columns < this.getMaxIndex() ? true : false;\n    }\n\n    canMoveLeft(): boolean {\n        return this.index !== 0 ? true : false;\n    }\n\n    getThumbnailLeft(index: number): SafeStyle {\n        let calculatedIndex;\n\n        if (this.order === NbGalleryOrder.Column) {\n            calculatedIndex = Math.floor(index / this.rows);\n        } else if (this.order === NbGalleryOrder.Page) {\n            calculatedIndex = (index % this.columns) + (Math.floor(index / (this.rows * this.columns)) * this.columns);\n        } else if (this.order === NbGalleryOrder.Row && this.remainingCount) {\n            calculatedIndex = index % this.columns;\n        } else {\n            calculatedIndex = index % Math.ceil(this.items.length / this.rows);\n        }\n\n        return this.getThumbnailPosition(calculatedIndex, this.columns);\n    }\n\n    getThumbnailTop(index: number): SafeStyle {\n        let calculatedIndex;\n\n        if (this.order === NbGalleryOrder.Column) {\n            calculatedIndex = index % this.rows;\n        } else if (this.order === NbGalleryOrder.Page) {\n            calculatedIndex = Math.floor(index / this.columns) - (Math.floor(index / (this.rows * this.columns)) * this.rows);\n        } else if (this.order === NbGalleryOrder.Row && this.remainingCount) {\n            calculatedIndex = Math.floor(index / this.columns);\n        } else {\n            calculatedIndex = Math.floor(index / Math.ceil(this.items.length / this.rows));\n        }\n\n        return this.getThumbnailPosition(calculatedIndex, this.rows);\n    }\n\n    getThumbnailWidth(): SafeStyle {\n        return this.getThumbnailDimension(this.columns);\n    }\n\n    getThumbnailHeight(): SafeStyle {\n        return this.getThumbnailDimension(this.rows);\n    }\n\n    setThumbnailsPosition(): void {\n        this.thumbnailsLeft = - ((100 / this.columns) * this.index) + '%'\n\n        this.thumbnailsMarginLeft = - ((this.margin - (((this.columns - 1)\n        * this.margin) / this.columns)) * this.index) + 'px';\n    }\n\n    setDefaultPosition(): void {\n        this.thumbnailsLeft = '0px';\n        this.thumbnailsMarginLeft = '0px';\n    }\n\n    canShowArrows(): boolean {\n        if (this.remainingCount) {\n            return false;\n        } else if (this.arrows && this.items && this.items.length > this.getVisibleCount()\n            && (!this.arrowsAutoHide || this.mouseenter)) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    validateIndex(): void {\n        if (this.items) {\n            let newIndex;\n\n            if (this.order === NbGalleryOrder.Column) {\n                newIndex = Math.floor(this.selectedIndex / this.rows);\n            } else {\n                newIndex = this.selectedIndex % Math.ceil(this.items.length / this.rows);\n            }\n\n            if (this.remainingCount) {\n                newIndex = 0;\n            }\n\n            if (newIndex < this.index || newIndex >= this.index + this.columns) {\n                const maxIndex = this.getMaxIndex() - this.columns;\n                this.index = newIndex > maxIndex ? maxIndex : newIndex;\n\n                this.setThumbnailsPosition();\n            }\n        }\n    }\n\n    getSafeUrl(image: string): SafeStyle {\n        return this.sanitization.bypassSecurityTrustStyle(this.helperService.getBackgroundUrl(image));\n    }\n\n    private getThumbnailPosition(index: number, count: number): SafeStyle {\n        return this.getSafeStyle('calc(' + ((100 / count) * index) + '% + '\n            + ((this.margin - (((count - 1) * this.margin) / count)) * index) + 'px)');\n    }\n\n    private getThumbnailDimension(count: number): SafeStyle {\n        if (this.margin !== 0) {\n            return this.getSafeStyle('calc(' + (100 / count) + '% - '\n                + (((count - 1) * this.margin) / count) + 'px)');\n        } else {\n            return this.getSafeStyle('calc(' + (100 / count) + '% + 1px)');\n        }\n    }\n\n    private getMaxIndex(): number {\n        if (this.order === NbGalleryOrder.Page) {\n            let maxIndex = (Math.floor(this.items.length / this.getVisibleCount()) * this.columns);\n\n            if (this.items.length % this.getVisibleCount() > this.columns) {\n                maxIndex += this.columns;\n            } else {\n                maxIndex += this.items.length % this.getVisibleCount();\n            }\n\n            return maxIndex;\n        } else {\n            return Math.ceil(this.items.length / this.rows);\n        }\n    }\n\n    private getVisibleCount(): number {\n        return this.columns * this.rows;\n    }\n\n    private getSafeStyle(value: string): SafeStyle {\n        return this.sanitization.bypassSecurityTrustStyle(value);\n    }\n}\n","import { ChangeDetectorRef, Component, Input, Output, EventEmitter, OnChanges, SimpleChanges, ElementRef, HostListener, ViewChild, Renderer } from '@angular/core';\nimport { SafeResourceUrl, DomSanitizer, SafeUrl, SafeStyle } from '@angular/platform-browser';\n\nimport { NbGalleryAction } from '../models/nb-gallery-action.model';\nimport { NbGalleryHelperService } from '../nb-gallery-helper.service';\nimport { NbGalleryOrderedItem } from '../models/nb-gallery-ordered-item.model';\n\n@Component({\n    selector: 'nb-gallery-preview',\n    template: `\n        <nb-gallery-arrows (onPrevClick)=\"showPrev()\" (onNextClick)=\"showNext()\" [prevDisabled]=\"!canShowPrev()\" [nextDisabled]=\"!canShowNext()\" [arrowPrevIcon]=\"arrowPrevIcon\" [arrowNextIcon]=\"arrowNextIcon\"></nb-gallery-arrows>\n        <div class=\"nb-gallery-preview-top\">\n            <div class=\"nb-gallery-preview-icons\">\n                <nb-gallery-action *ngFor=\"let action of actions\" [icon]=\"action.icon\" [disabled]=\"action.disabled\" [titleText]=\"action.titleText\" (onClick)=\"action.onClick($event, index)\"></nb-gallery-action>\n                <a *ngIf=\"download && src\" [href]=\"src\" class=\"nb-gallery-icon\" aria-hidden=\"true\" download>\n                    <i class=\"nb-gallery-icon-content {{ downloadIcon }}\"></i>\n                </a>\n                <nb-gallery-action *ngIf=\"zoom\" [icon]=\"zoomOutIcon\" [disabled]=\"!canZoomOut()\" (onClick)=\"zoomOut()\"></nb-gallery-action>\n                <nb-gallery-action *ngIf=\"zoom\" [icon]=\"zoomInIcon\" [disabled]=\"!canZoomIn()\" (onClick)=\"zoomIn()\"></nb-gallery-action>\n                <nb-gallery-action *ngIf=\"rotate\" [icon]=\"rotateLeftIcon\" (onClick)=\"rotateLeft()\"></nb-gallery-action>\n                <nb-gallery-action *ngIf=\"rotate\" [icon]=\"rotateRightIcon\" (onClick)=\"rotateRight()\"></nb-gallery-action>\n                <nb-gallery-action *ngIf=\"fullscreen\" [icon]=\"'nb-gallery-fullscreen ' + fullscreenIcon\" (onClick)=\"manageFullscreen()\"></nb-gallery-action>\n                <nb-gallery-action [icon]=\"'nb-gallery-close ' + closeIcon\" (onClick)=\"close()\"></nb-gallery-action>\n            </div>\n        </div>\n        <div class=\"nb-spinner-wrapper nb-gallery-center\" [class.nb-gallery-active]=\"showSpinner\">\n            <i class=\"nb-gallery-icon nb-gallery-spinner {{spinnerIcon}}\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"nb-gallery-preview-wrapper\" (click)=\"closeOnClick && close()\" (mouseup)=\"mouseUpHandler($event)\" (mousemove)=\"mouseMoveHandler($event)\" (touchend)=\"mouseUpHandler($event)\" (touchmove)=\"mouseMoveHandler($event)\">\n            <div class=\"nb-gallery-preview-img-wrapper\">\n                <img *ngIf=\"src && item && item.type === 'image'\" #previewImage class=\"nb-gallery-preview-img nb-gallery-center\" [src]=\"src\" (click)=\"$event.stopPropagation()\" (mouseenter)=\"imageMouseEnter()\" (mouseleave)=\"imageMouseLeave()\" (mousedown)=\"mouseDownHandler($event)\" (touchstart)=\"mouseDownHandler($event)\" [class.nb-gallery-active]=\"!loading\" [class.animation]=\"animation\" [class.nb-gallery-grab]=\"canDragOnZoom()\" [style.transform]=\"getTransform()\" [style.left]=\"positionLeft + 'px'\" [style.top]=\"positionTop + 'px'\"/>\n                <nb-gallery-video *ngIf=\"item && item.type === 'video'\" #previewVideo [videoItem]=\"item\" [pause]=\"index !== srcIndex\" class=\"nb-gallery-preview-video nb-gallery-center\" (click)=\"$event.stopPropagation()\" [class.nb-gallery-active]=\"!loading\" [class.animation]=\"animation\" [class.nb-gallery-grab]=\"canDragOnZoom()\" [style.transform]=\"getTransform()\" [style.left]=\"positionLeft + 'px'\" [style.top]=\"positionTop + 'px'\" ></nb-gallery-video>\n                <nb-gallery-bullets *ngIf=\"bullets\" [count]=\"items.length\" [active]=\"index\" (onChange)=\"showAtIndex($event)\"></nb-gallery-bullets>\n            </div>\n            <div class=\"nb-gallery-preview-text\" *ngIf=\"showDescription && description\" [innerHTML]=\"description\" (click)=\"$event.stopPropagation()\"></div>\n        </div>\n    `,\n    styleUrls: ['./nb-gallery-preview.component.scss']\n})\nexport class NbGalleryPreviewComponent implements OnChanges {\n\n    src: SafeUrl;\n    srcIndex: number;\n    description: string;\n    item: NbGalleryOrderedItem;\n    showSpinner = false;\n    positionLeft = 0;\n    positionTop = 0;\n    zoomValue = 1;\n    loading = false;\n    rotateValue = 0;\n    index = 0;\n\n    @Input() items: NbGalleryOrderedItem[];\n    @Input() descriptions: string[];\n    @Input() showDescription: boolean;\n    @Input() swipe: boolean;\n    @Input() fullscreen: boolean;\n    @Input() forceFullscreen: boolean;\n    @Input() closeOnClick: boolean;\n    @Input() closeOnEsc: boolean;\n    @Input() keyboardNavigation: boolean;\n    @Input() arrowPrevIcon: string;\n    @Input() arrowNextIcon: string;\n    @Input() closeIcon: string;\n    @Input() fullscreenIcon: string;\n    @Input() spinnerIcon: string;\n    @Input() autoPlay: boolean;\n    @Input() autoPlayInterval: number;\n    @Input() autoPlayPauseOnHover: boolean;\n    @Input() infinityMove: boolean;\n    @Input() zoom: boolean;\n    @Input() zoomStep: number;\n    @Input() zoomMax: number;\n    @Input() zoomMin: number;\n    @Input() zoomInIcon: string;\n    @Input() zoomOutIcon: string;\n    @Input() animation: boolean;\n    @Input() actions: NbGalleryAction[];\n    @Input() rotate: boolean;\n    @Input() rotateLeftIcon: string;\n    @Input() rotateRightIcon: string;\n    @Input() download: boolean;\n    @Input() downloadIcon: string;\n    @Input() bullets: string;\n\n    @Output() onOpen = new EventEmitter();\n    @Output() onClose = new EventEmitter();\n    @Output() onActiveChange = new EventEmitter<number>();\n\n    @ViewChild('previewImage') previewImage: ElementRef;\n    // @ViewChild('previewVideo') previewVideo: ElementRef;\n\n    private isOpen = false;\n    private timer;\n    private initialX = 0;\n    private initialY = 0;\n    private initialLeft = 0;\n    private initialTop = 0;\n    private isMove = false;\n\n    private keyDownListener: Function;\n\n    constructor(private sanitization: DomSanitizer, private elementRef: ElementRef,\n        private helperService: NbGalleryHelperService, private renderer: Renderer,\n        private changeDetectorRef: ChangeDetectorRef) {}\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes['swipe']) {\n            this.helperService.manageSwipe(this.swipe, this.elementRef,\n            'preview', () => this.showNext(), () => this.showPrev());\n        }\n    }\n\n    ngOnDestroy() {\n        if (this.keyDownListener) {\n            this.keyDownListener();\n        }\n    }\n\n    onKeyDown(e) {\n        if (this.isOpen) {\n            if (this.keyboardNavigation) {\n                if (this.isKeyboardPrev(e)) {\n                    this.showPrev();\n                } else if (this.isKeyboardNext(e)) {\n                    this.showNext();\n                }\n            }\n            if (this.closeOnEsc && this.isKeyboardEsc(e)) {\n                this.close();\n            }\n        }\n    }\n\n    open(index: number): void {\n        this.onOpen.emit();\n\n        this.index = index;\n        this.isOpen = true;\n        this.show(true);\n\n        if (this.forceFullscreen) {\n            this.manageFullscreen();\n        }\n\n        this.keyDownListener = this.renderer.listenGlobal(\"window\", \"keydown\", (e) => this.onKeyDown(e));\n    }\n\n    close(): void {\n        this.isOpen = false;\n        this.closeFullscreen();\n        this.onClose.emit();\n\n        this.stopAutoPlay();\n\n        if (this.keyDownListener) {\n            this.keyDownListener();\n        }\n    }\n\n    imageMouseEnter(): void {\n        if (this.autoPlay && this.autoPlayPauseOnHover) {\n            this.stopAutoPlay();\n        }\n    }\n\n    imageMouseLeave(): void {\n        if (this.autoPlay && this.autoPlayPauseOnHover) {\n            this.startAutoPlay();\n        }\n    }\n\n    startAutoPlay(): void {\n        if (this.autoPlay) {\n            this.stopAutoPlay();\n\n            this.timer = setTimeout(() => {\n                if (!this.showNext()) {\n                    this.index = -1;\n                    this.showNext();\n                }\n            }, this.autoPlayInterval);\n        }\n    }\n\n    stopAutoPlay(): void {\n        if (this.timer) {\n            clearTimeout(this.timer);\n        }\n    }\n\n    showAtIndex(index: number): void {\n        this.index = index;\n        this.show();\n    }\n\n    showNext(): boolean {\n        if (this.canShowNext()) {\n            this.index++;\n\n            if (this.index === this.items.length) {\n                this.index = 0;\n            }\n\n            this.show();\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    showPrev(): void {\n        if (this.canShowPrev()) {\n            this.index--;\n\n            if (this.index < 0) {\n                this.index = this.items.length - 1;\n            }\n\n            this.show();\n        }\n    }\n\n    canShowNext(): boolean {\n        if (this.loading) {\n            return false;\n        } else if (this.items) {\n            return this.infinityMove || this.index < this.items.length - 1 ? true : false;\n        } else {\n            return false;\n        }\n    }\n\n    canShowPrev(): boolean {\n        if (this.loading) {\n            return false;\n        } else if (this.items) {\n            return this.infinityMove || this.index > 0 ? true : false;\n        } else {\n            return false;\n        }\n    }\n\n    manageFullscreen(): void {\n        if (this.fullscreen || this.forceFullscreen) {\n            const doc = <any>document;\n\n            if (!doc.fullscreenElement && !doc.mozFullScreenElement\n                && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {\n                this.openFullscreen();\n            } else {\n                this.closeFullscreen();\n            }\n        }\n    }\n\n    getSafeUrl(image: string): SafeUrl {\n        return image.substr(0, 10) === 'data:image' ?\n            image : this.sanitization.bypassSecurityTrustUrl(image);\n    }\n\n    zoomIn(): void {\n        if (this.canZoomIn()) {\n            this.zoomValue += this.zoomStep;\n\n            if (this.zoomValue > this.zoomMax) {\n                this.zoomValue = this.zoomMax;\n            }\n        }\n    }\n\n    zoomOut(): void {\n        if (this.canZoomOut()) {\n            this.zoomValue -= this.zoomStep;\n\n            if (this.zoomValue < this.zoomMin) {\n                this.zoomValue = this.zoomMin;\n            }\n\n            if (this.zoomValue <= 1) {\n                this.resetPosition()\n            }\n        }\n    }\n\n    rotateLeft(): void {\n        this.rotateValue -= 90;\n    }\n\n    rotateRight(): void {\n        this.rotateValue += 90;\n    }\n\n    getTransform(): SafeStyle {\n        return this.sanitization.bypassSecurityTrustStyle('scale(' + this.zoomValue + ') rotate(' + this.rotateValue + 'deg)');\n    }\n\n    canZoomIn(): boolean {\n        return this.zoomValue < this.zoomMax ? true : false;\n    }\n\n    canZoomOut(): boolean {\n        return this.zoomValue > this.zoomMin ? true : false;\n    }\n\n    canDragOnZoom() {\n        return this.zoom && this.zoomValue > 1;\n    }\n\n    mouseDownHandler(e): void {\n        if (this.canDragOnZoom()) {\n            this.initialX = this.getClientX(e);\n            this.initialY = this.getClientY(e);\n            this.initialLeft = this.positionLeft;\n            this.initialTop = this.positionTop;\n            this.isMove = true;\n\n            e.preventDefault();\n        }\n    }\n\n    mouseUpHandler(e): void {\n        this.isMove = false;\n    }\n\n    mouseMoveHandler(e) {\n        if (this.isMove) {\n            this.positionLeft = this.initialLeft + (this.getClientX(e) - this.initialX);\n            this.positionTop = this.initialTop + (this.getClientY(e) - this.initialY);\n        }\n    }\n\n    private getClientX(e): number {\n        return e.touches && e.touches.length ? e.touches[0].clientX : e.clientX;\n    }\n\n    private getClientY(e): number {\n        return e.touches && e.touches.length ? e.touches[0].clientY : e.clientY;\n    }\n\n    private resetPosition() {\n        if (this.zoom) {\n            this.positionLeft = 0;\n            this.positionTop = 0;\n        }\n    }\n\n    private isKeyboardNext(e): boolean {\n        return e.keyCode === 39 ? true : false;\n    }\n\n    private isKeyboardPrev(e): boolean {\n        return e.keyCode === 37 ? true : false;\n    }\n\n    private isKeyboardEsc(e): boolean {\n        return e.keyCode === 27 ? true : false;\n    }\n\n    private openFullscreen(): void {\n        const element = <any>document.documentElement;\n\n        if (element.requestFullscreen) {\n            element.requestFullscreen();\n        } else if (element.msRequestFullscreen) {\n            element.msRequestFullscreen();\n        } else if (element.mozRequestFullScreen) {\n            element.mozRequestFullScreen();\n        } else if (element.webkitRequestFullscreen) {\n            element.webkitRequestFullscreen();\n        }\n    }\n\n    private closeFullscreen(): void {\n\n        const doc = <any>document;\n\n        if (doc.exitFullscreen) {\n            doc.exitFullscreen();\n        } else if (doc.msExitFullscreen) {\n            doc.msExitFullscreen();\n        } else if (doc.mozCancelFullScreen) {\n            doc.mozCancelFullScreen();\n        } else if (doc.webkitExitFullscreen) {\n            doc.webkitExitFullscreen();\n        }\n    }\n\n    private show(first = false) {\n        this.loading = true;\n        this.stopAutoPlay();\n\n        this.onActiveChange.emit(this.index);\n\n        if (first || !this.animation) {\n            this._show();\n        } else {\n            setTimeout(() => this._show(), 600);\n        }\n    }\n\n    private _show() {\n        this.zoomValue = 1;\n        this.rotateValue = 0;\n        this.resetPosition();\n        console.log(this.items);\n        this.src = this.items[this.index].type === 'image' ? this.getSafeUrl(<string>this.items[this.index].url) : undefined;\n        this.item = this.items[this.index];\n        console.log(this.item);\n        this.srcIndex = this.index;\n        this.description = this.descriptions[this.index];\n        this.changeDetectorRef.markForCheck();\n\n        setTimeout(() => {\n            if (this.items[this.index].type === 'video') {\n                this.updateOnVideo();\n            } else {\n                this.updateOnImage();\n            }\n        })\n    }\n\n    private isImgLoaded(img): boolean {\n        if (!img.complete) {\n            return false;\n        }\n\n        if (typeof img.naturalWidth !== 'undefined' && img.naturalWidth === 0) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private updateOnImage() {\n        if (this.isImgLoaded(this.previewImage.nativeElement)) {\n            this.loading = false;\n            this.startAutoPlay();\n            this.changeDetectorRef.markForCheck();\n        } else {\n            setTimeout(() => {\n                if (this.loading) {\n                    this.showSpinner = true;\n                    this.changeDetectorRef.markForCheck();\n                }\n            });\n\n            this.previewImage.nativeElement.onload = () => {\n                this.loading = false;\n                this.showSpinner = false;\n                this.previewImage.nativeElement.onload = null;\n                this.startAutoPlay();\n                this.changeDetectorRef.markForCheck();\n            };\n        }\n    }\n\n    private updateOnVideo() {\n        this.loading = false;\n    }\n}\n","export class NbGalleryImageSize {\n    static Cover = 'cover';\n    static Contain = 'contain';\n}\n","export class NbGalleryLayout {\n    static ThumbnailsTop = 'thumbnails-top';\n    static ThumbnailsBottom = 'thumbnails-bottom';\n}\n","export interface INbGalleryAction {\n    icon: string;\n    disabled?: boolean;\n    titleText?: string;\n\n    onClick: (event: Event) => void;\n}\n\nexport class NbGalleryAction implements INbGalleryAction {\n    icon: string;\n    disabled?: boolean;\n    titleText?: string;\n\n    onClick: (event: Event) => void;\n\n    constructor(action: INbGalleryAction) {\n        this.icon = action.icon;\n        this.disabled = action.disabled ? action.disabled : false;\n        this.titleText = action.titleText ? action.titleText : '';\n\n        this.onClick = action.onClick;\n    }\n}\n","import { NbGalleryAnimation } from './nb-gallery-animation.model';\nimport { NbGalleryImageSize } from './nb-gallery-image-size.model';\nimport { NbGalleryLayout } from './nb-gallery-layout.model';\nimport { NbGalleryOrder } from './nb-gallery-order.model';\nimport { NbGalleryAction } from './nb-gallery-action.model';\n\nexport interface INbGalleryOptions {\n    width?: string;\n    height?: string;\n    breakpoint?: number;\n    fullWidth?: boolean;\n    layout?: string;\n    startIndex?: number;\n    linkTarget?: string;\n    lazyLoading?: boolean;\n    item?: boolean;\n    itemPercent?: number;\n    itemArrows?: boolean;\n    itemArrowsAutoHide?: boolean;\n    itemSwipe?: boolean;\n    itemAnimation?: string;\n    itemSize?: string;\n    itemAutoPlay?: boolean;\n    itemAutoPlayInterval?: number;\n    itemAutoPlayPauseOnHover?: boolean;\n    itemInfinityMove?: boolean;\n    itemActions?: NbGalleryAction[];\n    itemDescription?: boolean;\n    itemBullets?: boolean;\n    thumbnails?: boolean;\n    defaultVideoThumbnnailUrl?: string;\n    thumbnailsColumns?: number;\n    thumbnailsRows?: number;\n    thumbnailsPercent?: number;\n    thumbnailsMargin?: number;\n    thumbnailsArrows?: boolean;\n    thumbnailsArrowsAutoHide?: boolean;\n    thumbnailsSwipe?: boolean;\n    thumbnailsMoveSize?: number;\n    thumbnailsOrder?: NbGalleryOrder;\n    thumbnailsRemainingCount?: boolean;\n    thumbnailsAsLinks?: boolean;\n    thumbnailsAutoHide?: boolean;\n    thumbnailMargin?: number;\n    thumbnailSize?: string;\n    thumbnailActions?: NbGalleryAction[];\n    preview?: boolean;\n    previewDescription?: boolean;\n    previewSwipe?: boolean;\n    previewFullscreen?: boolean;\n    previewForceFullscreen?: boolean;\n    previewCloseOnClick?: boolean;\n    previewCloseOnEsc?: boolean;\n    previewKeyboardNavigation?: boolean;\n    previewAnimation?: boolean;\n    previewAutoPlay?: boolean;\n    previewAutoPlayInterval?: number;\n    previewAutoPlayPauseOnHover?: boolean;\n    previewInfinityMove?: boolean;\n    previewZoom?: boolean;\n    previewZoomStep?: number;\n    previewZoomMax?: number;\n    previewZoomMin?: number;\n    previewRotate?: boolean;\n    previewDownload?: boolean;\n    previewCustom?: (index: number) => void;\n    previewBullets?: boolean;\n    arrowPrevIcon?: string;\n    arrowNextIcon?: string;\n    closeIcon?: string;\n    fullscreenIcon?: string;\n    spinnerIcon?: string;\n    zoomInIcon?: string;\n    zoomOutIcon?: string;\n    rotateLeftIcon?: string;\n    rotateRightIcon?: string;\n    downloadIcon?: string;\n    actions?: NbGalleryAction[];\n}\n\nexport class NbGalleryOptions implements INbGalleryOptions {\n    width?: string;\n    height?: string;\n    breakpoint?: number;\n    fullWidth?: boolean;\n    layout?: string;\n    startIndex?: number;\n    linkTarget?: string;\n    lazyLoading?: boolean;\n    item?: boolean;\n    itemPercent?: number;\n    itemArrows?: boolean;\n    itemArrowsAutoHide?: boolean;\n    itemSwipe?: boolean;\n    itemAnimation?: string;\n    itemSize?: string;\n    itemAutoPlay?: boolean;\n    itemAutoPlayInterval?: number;\n    itemAutoPlayPauseOnHover?: boolean;\n    itemInfinityMove?: boolean;\n    itemActions?: NbGalleryAction[];\n    itemDescription?: boolean;\n    itemBullets?: boolean;\n    thumbnails?: boolean;\n    defaultVideoThumbnnailUrl?: string;\n    thumbnailsColumns?: number;\n    thumbnailsRows?: number;\n    thumbnailsPercent?: number;\n    thumbnailsMargin?: number;\n    thumbnailsArrows?: boolean;\n    thumbnailsArrowsAutoHide?: boolean;\n    thumbnailsSwipe?: boolean;\n    thumbnailsMoveSize?: number;\n    thumbnailsOrder?: NbGalleryOrder;\n    thumbnailsRemainingCount?: boolean;\n    thumbnailsAsLinks?: boolean;\n    thumbnailsAutoHide?: boolean;\n    thumbnailMargin?: number;\n    thumbnailSize?: string;\n    thumbnailActions?: NbGalleryAction[];\n    preview?: boolean;\n    previewDescription?: boolean;\n    previewSwipe?: boolean;\n    previewFullscreen?: boolean;\n    previewForceFullscreen?: boolean;\n    previewCloseOnClick?: boolean;\n    previewCloseOnEsc?: boolean;\n    previewKeyboardNavigation?: boolean;\n    previewAnimation?: boolean;\n    previewAutoPlay?: boolean;\n    previewAutoPlayInterval?: number;\n    previewAutoPlayPauseOnHover?: boolean;\n    previewInfinityMove?: boolean;\n    previewZoom?: boolean;\n    previewZoomStep?: number;\n    previewZoomMax?: number;\n    previewZoomMin?: number;\n    previewRotate?: boolean;\n    previewDownload?: boolean;\n    previewCustom?: (index: number) => void;\n    previewBullets?: boolean;\n    arrowPrevIcon?: string;\n    arrowNextIcon?: string;\n    closeIcon?: string;\n    fullscreenIcon?: string;\n    spinnerIcon?: string;\n    zoomInIcon?: string;\n    zoomOutIcon?: string;\n    rotateLeftIcon?: string;\n    rotateRightIcon?: string;\n    downloadIcon?: string;\n    actions?: NbGalleryAction[];\n\n    constructor(obj: INbGalleryOptions) {\n\n        const preventDefaults = obj.breakpoint === undefined ? false : true;\n\n        function use<T>(source: T, defaultValue: T): T {\n            return obj && (source !== undefined || preventDefaults) ? source : defaultValue;\n        }\n\n        this.breakpoint = use(obj.breakpoint, undefined);\n        this.width = use(obj.width, '500px');\n        this.height = use(obj.height, '400px');\n        this.fullWidth = use(obj.fullWidth, false);\n        this.layout = use(obj.layout, NbGalleryLayout.ThumbnailsBottom);\n        this.startIndex = use(obj.startIndex, 0);\n        this.linkTarget = use(obj.linkTarget, '_blank');\n        this.lazyLoading = use(obj.lazyLoading, true);\n\n        this.item = use(obj.item, true);\n        this.itemPercent = use(obj.itemPercent, 75);\n        this.itemArrows = use(obj.itemArrows, true);\n        this.itemArrowsAutoHide = use(obj.itemArrowsAutoHide, false);\n        this.itemSwipe = use(obj.itemSwipe, false);\n        this.itemAnimation = use(obj.itemAnimation, NbGalleryAnimation.Fade);\n        this.itemSize = use(obj.itemSize, NbGalleryImageSize.Cover);\n        this.itemAutoPlay = use(obj.itemAutoPlay, false);\n        this.itemAutoPlayInterval = use(obj.itemAutoPlayInterval, 2000);\n        this.itemAutoPlayPauseOnHover = use(obj.itemAutoPlayPauseOnHover, false);\n        this.itemInfinityMove = use(obj.itemInfinityMove, false);\n        if (obj && obj.itemActions && obj.itemActions.length) {\n            obj.itemActions = obj.itemActions.map(action => new NbGalleryAction(action));\n        }\n        this.itemActions = use(obj.itemActions, []);\n        this.itemDescription = use(obj.itemDescription, false);\n        this.itemBullets = use(obj.itemBullets, false);\n\n        this.thumbnails = use(obj.thumbnails, true);\n        this.defaultVideoThumbnnailUrl = use(obj.defaultVideoThumbnnailUrl, undefined);\n        this.thumbnailsColumns = use(obj.thumbnailsColumns, 4);\n        this.thumbnailsRows = use(obj.thumbnailsRows, 1);\n        this.thumbnailsPercent = use(obj.thumbnailsPercent, 25);\n        this.thumbnailsMargin = use(obj.thumbnailsMargin, 10);\n        this.thumbnailsArrows = use(obj.thumbnailsArrows, true);\n        this.thumbnailsArrowsAutoHide = use(obj.thumbnailsArrowsAutoHide, false);\n        this.thumbnailsSwipe = use(obj.thumbnailsSwipe, false);\n        this.thumbnailsMoveSize = use(obj.thumbnailsMoveSize, 1);\n        this.thumbnailsOrder = use(obj.thumbnailsOrder, NbGalleryOrder.Column);\n        this.thumbnailsRemainingCount = use(obj.thumbnailsRemainingCount, false);\n        this.thumbnailsAsLinks = use(obj.thumbnailsAsLinks, false);\n        this.thumbnailsAutoHide = use(obj.thumbnailsAutoHide, false);\n        this.thumbnailMargin = use(obj.thumbnailMargin, 10);\n        this.thumbnailSize = use(obj.thumbnailSize, NbGalleryImageSize.Cover);\n        if (obj && obj.thumbnailActions && obj.thumbnailActions.length) {\n            obj.thumbnailActions = obj.thumbnailActions.map(action => new NbGalleryAction(action));\n        }\n        this.thumbnailActions = use(obj.thumbnailActions, []);\n\n        this.preview = use(obj.preview, true);\n        this.previewDescription = use(obj.previewDescription, true);\n        this.previewSwipe = use(obj.previewSwipe, false);\n        this.previewFullscreen = use(obj.previewFullscreen, false);\n        this.previewForceFullscreen = use(obj.previewForceFullscreen, false);\n        this.previewCloseOnClick = use(obj.previewCloseOnClick, false);\n        this.previewCloseOnEsc = use(obj.previewCloseOnEsc, false);\n        this.previewKeyboardNavigation = use(obj.previewKeyboardNavigation, false);\n        this.previewAnimation = use(obj.previewAnimation, true);\n        this.previewAutoPlay = use(obj.previewAutoPlay, false);\n        this.previewAutoPlayInterval = use(obj.previewAutoPlayInterval, 2000);\n        this.previewAutoPlayPauseOnHover = use(obj.previewAutoPlayPauseOnHover, false);\n        this.previewInfinityMove = use(obj.previewInfinityMove, false);\n        this.previewZoom = use(obj.previewZoom, false);\n        this.previewZoomStep = use(obj.previewZoomStep, 0.1);\n        this.previewZoomMax = use(obj.previewZoomMax, 2);\n        this.previewZoomMin = use(obj.previewZoomMin, 0.5);\n        this.previewRotate = use(obj.previewRotate, false);\n        this.previewDownload = use(obj.previewDownload, false);\n        this.previewCustom = use(obj.previewCustom, undefined);\n        this.previewBullets = use(obj.previewBullets, false);\n\n        this.arrowPrevIcon = use(obj.arrowPrevIcon, 'fa fa-arrow-circle-left');\n        this.arrowNextIcon = use(obj.arrowNextIcon, 'fa fa-arrow-circle-right');\n        this.closeIcon = use(obj.closeIcon, 'fa fa-times-circle');\n        this.fullscreenIcon = use(obj.fullscreenIcon, 'fa fa-arrows-alt');\n        this.spinnerIcon = use(obj.spinnerIcon, 'fa fa-spinner fa-pulse fa-3x fa-fw');\n        this.zoomInIcon = use(obj.zoomInIcon, 'fa fa-search-plus');\n        this.zoomOutIcon = use(obj.zoomOutIcon, 'fa fa-search-minus');\n        this.rotateLeftIcon = use(obj.rotateLeftIcon, 'fa fa-undo');\n        this.rotateRightIcon = use(obj.rotateRightIcon, 'fa fa-repeat');\n        this.downloadIcon = use(obj.downloadIcon, 'fa fa-arrow-circle-down');\n\n        if (obj && obj.actions && obj.actions.length) {\n            obj.actions = obj.actions.map(action => new NbGalleryAction(action));\n        }\n        this.actions = use(obj.actions, []);\n    }\n}\n","import { SafeResourceUrl } from '@angular/platform-browser';\n\nexport interface INbGalleryThumbnail {\n    type ?: string; // video / image\n    source ?: string; // youtube / vimeo / memory in case of video urls\n    url?: string | SafeResourceUrl;\n}\n\nexport class NbGalleryThumbnail implements INbGalleryThumbnail {\n    type ?: string;\n    source ?: string;\n    url?: string | SafeResourceUrl;\n\n    constructor(obj: INbGalleryThumbnail) {\n        this.type = obj.type;\n        this.source = obj.source;\n        this.url = obj.url;\n    }\n}\n","import { SafeResourceUrl } from '@angular/platform-browser';\n\nexport interface INbGalleryOrderedItem {\n    type: string; // video / image\n    source ?: string; // youtube / vimeo / memory in case of video urls\n    url: string | SafeResourceUrl;\n    index: number;\n}\n\nexport class NbGalleryOrderedItem implements INbGalleryOrderedItem {\n    type: string;\n    source: string;\n    url: string | SafeResourceUrl;\n    index: number;\n\n    constructor(obj: INbGalleryOrderedItem) {\n        this.type = obj.type;\n        this.source = obj.source;\n        this.url = obj.url;\n        this.index = obj.index;\n    }\n}\n","import { Component, Input, HostListener, ViewChild, OnInit,\n  HostBinding, DoCheck, ElementRef, AfterViewInit, Output, EventEmitter } from '@angular/core';\nimport { SafeResourceUrl } from '@angular/platform-browser';\n\nimport { NbGalleryPreviewComponent } from './nb-gallery-preview/nb-gallery-preview.component';\nimport { NbGalleryItemComponent } from './nb-gallery-item/nb-gallery-item.component';\nimport { NbGalleryThumbnailsComponent } from './nb-gallery-thumbnails/nb-gallery-thumbnails.component';\nimport { NbGalleryHelperService } from './nb-gallery-helper.service';\n\nimport { NbGalleryItem } from './models/nb-gallery-item.model';\nimport { NbGalleryOptions } from './models/nb-gallery-options.model';\nimport { NbGalleryThumbnail } from './models/nb-gallery-thumbnail.model';\nimport { NbGalleryLayout } from './models/nb-gallery-layout.model';\nimport { NbGalleryOrderedItem } from './models/nb-gallery-ordered-item.model';\nimport { NbGalleryPreview } from './models/nb-gallery-preview.model';\n\n@Component({\n  selector: 'nb-gallery',\n  template: `\n  <div class=\"nb-gallery-layout {{currentOptions?.layout}}\">\n      <nb-gallery-item  *ngIf=\"currentOptions?.item\" [style.height]=\"getItemHeight()\" [items]=\"galleryItems\" [clickable]=\"currentOptions?.preview\" [selectedIndex]=\"selectedIndex\" [arrows]=\"currentOptions?.itemArrows\" [arrowsAutoHide]=\"currentOptions?.itemArrowsAutoHide\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [swipe]=\"currentOptions?.itemSwipe\" [animation]=\"currentOptions?.itemAnimation\" [size]=\"currentOptions?.itemSize\" [autoPlay]=\"currentOptions?.itemAutoPlay\" [autoPlayInterval]=\"currentOptions?.itemAutoPlayInterval\" [autoPlayPauseOnHover]=\"currentOptions?.itemAutoPlayPauseOnHover\" [infinityMove]=\"currentOptions?.itemInfinityMove\"  [lazyLoading]=\"currentOptions?.lazyLoading\" [actions]=\"currentOptions?.itemActions\" [descriptions]=\"descriptions\" [showDescription]=\"currentOptions?.itemDescription\" [bullets]=\"currentOptions?.itemBullets\" (onClick)=\"openPreview($event)\" (onActiveChange)=\"selectFromItem($event)\"></nb-gallery-item>\n      <nb-gallery-thumbnails *ngIf=\"currentOptions?.thumbnails\" [style.marginTop]=\"getThumbnailsMarginTop()\" [style.marginBottom]=\"getThumbnailsMarginBottom()\" [style.height]=\"getThumbnailsHeight()\" [items]=\"thumbnails\" [links]=\"currentOptions?.thumbnailsAsLinks ? links : []\" [labels]=\"labels\" [linkTarget]=\"currentOptions?.linkTarget\" [selectedIndex]=\"selectedIndex\" [columns]=\"currentOptions?.thumbnailsColumns\" [rows]=\"currentOptions?.thumbnailsRows\" [margin]=\"currentOptions?.thumbnailMargin\" [arrows]=\"currentOptions?.thumbnailsArrows\" [arrowsAutoHide]=\"currentOptions?.thumbnailsArrowsAutoHide\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [clickable]=\"currentOptions?.item || currentOptions?.preview\" [swipe]=\"currentOptions?.thumbnailsSwipe\" [size]=\"currentOptions?.thumbnailSize\" [moveSize]=\"currentOptions?.thumbnailsMoveSize\" [order]=\"currentOptions?.thumbnailsOrder\" [remainingCount]=\"currentOptions?.thumbnailsRemainingCount\" [lazyLoading]=\"currentOptions?.lazyLoading\" [actions]=\"currentOptions?.thumbnailActions\"  (onActiveChange)=\"selectFromThumbnails($event)\"></nb-gallery-thumbnails>\n      <nb-gallery-preview [items]=\"previewItems\" [descriptions]=\"descriptions\" [showDescription]=\"currentOptions?.previewDescription\" [arrowPrevIcon]=\"currentOptions?.arrowPrevIcon\" [arrowNextIcon]=\"currentOptions?.arrowNextIcon\" [closeIcon]=\"currentOptions?.closeIcon\" [fullscreenIcon]=\"currentOptions?.fullscreenIcon\" [spinnerIcon]=\"currentOptions?.spinnerIcon\" [swipe]=\"currentOptions?.previewSwipe\" [fullscreen]=\"currentOptions?.previewFullscreen\" [forceFullscreen]=\"currentOptions?.previewForceFullscreen\" [closeOnClick]=\"currentOptions?.previewCloseOnClick\" [closeOnEsc]=\"currentOptions?.previewCloseOnEsc\" [keyboardNavigation]=\"currentOptions?.previewKeyboardNavigation\" [animation]=\"currentOptions?.previewAnimation\" [autoPlay]=\"currentOptions?.previewAutoPlay\" [autoPlayInterval]=\"currentOptions?.previewAutoPlayInterval\" [autoPlayPauseOnHover]=\"currentOptions?.previewAutoPlayPauseOnHover\" [infinityMove]=\"currentOptions?.previewInfinityMove\" [zoom]=\"currentOptions?.previewZoom\" [zoomStep]=\"currentOptions?.previewZoomStep\" [zoomMax]=\"currentOptions?.previewZoomMax\" [zoomMin]=\"currentOptions?.previewZoomMin\" [zoomInIcon]=\"currentOptions?.zoomInIcon\" [zoomOutIcon]=\"currentOptions?.zoomOutIcon\" [actions]=\"currentOptions?.actions\" [rotate]=\"currentOptions?.previewRotate\" [rotateLeftIcon]=\"currentOptions?.rotateLeftIcon\" [rotateRightIcon]=\"currentOptions?.rotateRightIcon\" [download]=\"currentOptions?.previewDownload\" [downloadIcon]=\"currentOptions?.downloadIcon\" [bullets]=\"currentOptions?.previewBullets\" (onClose)=\"onPreviewClose()\" (onOpen)=\"onPreviewOpen()\" (onActiveChange)=\"previewSelect($event)\" [class.nb-gallery-active]=\"previewEnabled\"></nb-gallery-preview>\n  </div>\n  `,\n  styleUrls: ['./nb-gallery.component.scss'],\n  providers: [NbGalleryHelperService]\n})\nexport class NbGalleryComponent implements OnInit, DoCheck, AfterViewInit   {\n  @Input() options: NbGalleryOptions[];\n  @Input() items: NbGalleryItem[];\n\n  @Output() itemsReady = new EventEmitter();\n  @Output() change = new EventEmitter<{ index: number; item: NbGalleryItem; }>();\n  @Output() previewOpen = new EventEmitter();\n  @Output() previewClose = new EventEmitter();\n  @Output() previewChange = new EventEmitter<{ index: number; item: NbGalleryItem; }>();\n\n  thumbnails: NbGalleryThumbnail[];\n  galleryItems: NbGalleryOrderedItem[];\n  previewItems: NbGalleryOrderedItem[];\n  descriptions: string[];\n  links: string[];\n  labels: string[];\n\n  oldItems: NbGalleryItem[];\n  oldItemsLength = 0;\n\n  selectedIndex = 0;\n  previewEnabled: boolean;\n\n  currentOptions: NbGalleryOptions;\n\n  private breakpoint: number | undefined = undefined;\n  private prevBreakpoint: number | undefined = undefined;\n  private fullWidthTimeout: any;\n\n  @ViewChild(NbGalleryPreviewComponent) preview: NbGalleryPreviewComponent;\n  @ViewChild(NbGalleryItemComponent) item: NbGalleryItemComponent;\n  @ViewChild(NbGalleryThumbnailsComponent) thumbnail: NbGalleryThumbnailsComponent;\n\n  @HostBinding('style.width') width: string;\n  @HostBinding('style.height') height: string;\n  @HostBinding('style.left') left: string;\n\n  constructor(private myElement: ElementRef) {}\n\n  ngOnInit() {\n      this.options = this.options.map((opt) => new NbGalleryOptions(opt));\n      this.sortOptions();\n      this.setBreakpoint();\n      this.setOptions();\n      this.checkFullWidth();\n      if (this.currentOptions) {\n          this.selectedIndex = <number>this.currentOptions.startIndex;\n      }\n  }\n\n  ngDoCheck(): void {\n      if (this.items !== undefined && (this.items.length !== this.oldItemsLength)\n          || (this.items !== this.oldItems)) {\n          this.oldItemsLength = this.items.length;\n          this.oldItems = this.items;\n          this.setOptions();\n          this.setItems();\n\n          if (this.items && this.items.length) {\n              this.itemsReady.emit();\n          }\n\n          if (this.item) {\n              this.item.reset(<number>this.currentOptions.startIndex);\n          }\n\n          if (this.currentOptions.thumbnailsAutoHide && this.currentOptions.thumbnails\n              && this.items.length <= 1) {\n              this.currentOptions.thumbnails = false;\n              this.currentOptions.itemArrows = false;\n          }\n\n          this.resetThumbnails();\n      }\n  }\n\n  ngAfterViewInit(): void {\n      this.checkFullWidth();\n  }\n\n  @HostListener('window:resize') onResize() {\n      this.setBreakpoint();\n\n      if (this.prevBreakpoint !== this.breakpoint) {\n          this.setOptions();\n          this.resetThumbnails();\n      }\n\n      if (this.currentOptions && this.currentOptions.fullWidth) {\n\n          if (this.fullWidthTimeout) {\n              clearTimeout(this.fullWidthTimeout);\n          }\n\n          this.fullWidthTimeout = setTimeout(() => {\n              this.checkFullWidth();\n          }, 200);\n      }\n  }\n\n  getItemHeight(): string {\n      return (this.currentOptions && this.currentOptions.thumbnails) ?\n          this.currentOptions.itemPercent + '%' : '100%';\n  }\n\n  getThumbnailsHeight(): string {\n      if (this.currentOptions && this.currentOptions.item) {\n          return 'calc(' + this.currentOptions.thumbnailsPercent + '% - '\n          + this.currentOptions.thumbnailsMargin + 'px)';\n      } else {\n          return '100%';\n      }\n  }\n\n  getThumbnailsMarginTop(): string {\n      if (this.currentOptions && this.currentOptions.layout === NbGalleryLayout.ThumbnailsBottom) {\n          return this.currentOptions.thumbnailsMargin + 'px';\n      } else {\n          return '0px';\n      }\n  }\n\n  getThumbnailsMarginBottom(): string {\n      if (this.currentOptions && this.currentOptions.layout === NbGalleryLayout.ThumbnailsTop) {\n          return this.currentOptions.thumbnailsMargin + 'px';\n      } else {\n          return '0px';\n      }\n  }\n\n  openPreview(index: number): void {\n      if (this.currentOptions.previewCustom) {\n          this.currentOptions.previewCustom(index);\n      } else {\n          this.previewEnabled = true;\n          this.preview.open(index);\n      }\n      console.log(index);\n  }\n\n  onPreviewOpen(): void {\n      this.previewOpen.emit();\n\n      if (this.item && this.item.autoPlay) {\n          this.item.stopAutoPlay();\n      }\n  }\n\n  onPreviewClose(): void {\n      this.previewEnabled = false;\n      this.previewClose.emit();\n\n      if (this.item && this.item.autoPlay) {\n          this.item.startAutoPlay();\n      }\n  }\n\n  selectFromItem(index: number) {\n      this.select(index);\n  }\n\n  selectFromThumbnails(index: number) {\n      this.select(index);\n\n      if (this.currentOptions && this.currentOptions.thumbnails && this.currentOptions.preview\n          && (!this.currentOptions.item || this.currentOptions.thumbnailsRemainingCount)) {\n          this.openPreview(this.selectedIndex);\n      }\n  }\n\n  show(index: number): void {\n      this.select(index);\n  }\n\n  showNext(): void {\n      this.item.showNext();\n  }\n\n  showPrev(): void {\n      this.item.showPrev();\n  }\n\n  canShowNext(): boolean {\n      if (this.items && this.currentOptions) {\n          return (this.currentOptions.itemInfinityMove || this.selectedIndex < this.items.length - 1)\n              ? true : false;\n      } else {\n          return false;\n      }\n  }\n\n  canShowPrev(): boolean {\n      if (this.items && this.currentOptions) {\n          return (this.currentOptions.itemInfinityMove || this.selectedIndex > 0) ? true : false;\n      } else {\n          return false;\n      }\n  }\n\n  previewSelect(index: number) {\n      this.previewChange.emit({index, item: this.items[index]});\n  }\n\n  moveThumbnailsRight() {\n      this.thumbnail.moveRight();\n  }\n\n  moveThumbnailsLeft() {\n      this.thumbnail.moveLeft();\n  }\n\n  canMoveThumbnailsRight() {\n      return this.thumbnail.canMoveRight();\n  }\n\n  canMoveThumbnailsLeft() {\n      return this.thumbnail.canMoveLeft();\n  }\n\n  private resetThumbnails() {\n      if (this.thumbnail) {\n          this.thumbnail.reset(<number>this.currentOptions.startIndex);\n      }\n  }\n\n  private select(index: number) {\n      this.selectedIndex = index;\n\n      this.change.emit({\n          index,\n          item: this.items[index]\n      });\n  }\n\n  private checkFullWidth(): void {\n      if (this.currentOptions && this.currentOptions.fullWidth) {\n          this.width = document.body.clientWidth + 'px';\n          this.left = (-(document.body.clientWidth -\n              this.myElement.nativeElement.parentNode.innerWidth) / 2) + 'px';\n      }\n  }\n\n  private setItems(): void {\n      this.thumbnails = this.items.map((item, i) => new NbGalleryThumbnail({\n          type: item.type,\n          source: item.source,\n          url: item.type === 'image' ? item.small : this.currentOptions.defaultVideoThumbnnailUrl\n      }));\n      this.galleryItems = this.items.map((item, i) => new NbGalleryOrderedItem({\n          type: item.type,\n          source: item.source,\n          url: item.type === 'image' ? item.medium : item.url,\n          index: i\n      }));\n      this.previewItems = this.items.map((item, i) => new NbGalleryOrderedItem({\n          type: item.type,\n          source: item.source,\n          url: item.type === 'image' ? item.big : item.url,\n          index: i\n      }));\n      this.descriptions = this.items.map((item) => <string>item.description);\n      this.links = this.items.map((item) => <string>item.url);\n      this.labels = this.items.map((item) => <string>item.label);\n  }\n\n  private setBreakpoint(): void {\n      this.prevBreakpoint = this.breakpoint;\n      let breakpoints;\n\n      if (typeof window !== 'undefined') {\n          breakpoints = this.options.filter((opt) => opt.breakpoint >= window.innerWidth)\n              .map((opt) => opt.breakpoint);\n      }\n\n      if (breakpoints && breakpoints.length) {\n          this.breakpoint = breakpoints.pop();\n      } else {\n          this.breakpoint = undefined;\n      }\n  }\n\n  private sortOptions(): void {\n      this.options = [\n          ...this.options.filter((a) => a.breakpoint === undefined),\n          ...this.options\n              .filter((a) => a.breakpoint !== undefined)\n              .sort((a, b) => b.breakpoint - a.breakpoint)\n      ];\n  }\n\n  private setOptions(): void {\n      this.currentOptions = new NbGalleryOptions({});\n\n      this.options\n          .filter((opt) => opt.breakpoint === undefined || opt.breakpoint >= this.breakpoint)\n          .map((opt) => this.combineOptions(this.currentOptions, opt));\n\n      this.width = <string>this.currentOptions.width;\n      this.height = <string>this.currentOptions.height;\n  }\n\n  private combineOptions(first: NbGalleryOptions, second: NbGalleryOptions) {\n      Object.keys(second).map((val) => first[val] = second[val] !== undefined ? second[val] : first[val]);\n  }\n}\n\n","import { SafeResourceUrl } from '@angular/platform-browser';\n\nexport interface INbGalleryItem {\n    type ?: string; // video / image\n    source ?: string; // youtube / vimeo / memory in case of video urls\n    small?: string | SafeResourceUrl;\n    medium?: string | SafeResourceUrl;\n    big?: string | SafeResourceUrl;\n    description?: string;\n    url?: string; // video id in case of vimeo or youtube\n    label?: string;\n}\n\nexport class NbGalleryItem implements INbGalleryItem {\n    type ?: string;\n    source ?: string;\n    small?: string | SafeResourceUrl;\n    medium?: string | SafeResourceUrl;\n    big?: string | SafeResourceUrl;\n    description?: string;\n    url?: string;\n    label?: string;\n\n    constructor(obj: INbGalleryItem) {\n        this.type = obj.type;\n        this.source = obj.source;\n        this.small = obj.small;\n        this.medium = obj.medium;\n        this.big = obj.big;\n        this.description = obj.description;\n        this.url = obj.url;\n        this.label = obj.label;\n    }\n}\n","import { SafeResourceUrl } from '@angular/platform-browser';\n\nexport interface INbGalleryOrderedImage {\n    src: string | SafeResourceUrl;\n    index: number;\n}\n\nexport class NbGalleryOrderedImage implements INbGalleryOrderedImage {\n    src: string | SafeResourceUrl;\n    index: number;\n\n    constructor(obj: INbGalleryOrderedImage) {\n        this.src = obj.src;\n        this.index = obj.index;\n    }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HammerGestureConfig, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\n\nimport { NbGalleryActionComponent } from './nb-gallery-action/nb-gallery-action.component';\nimport { NbGalleryArrowsComponent } from './nb-gallery-arrows/nb-gallery-arrows.component';\nimport { NbGalleryBulletsComponent } from './nb-gallery-bullets/nb-gallery-bullets.component';\nimport { NbGalleryItemComponent } from './nb-gallery-item/nb-gallery-item.component';\nimport { NbGalleryVideoComponent } from './nb-gallery-video/nb-gallery-video.component';\nimport { NbGalleryIframeComponent } from './nb-gallery-video/nb-gallery-iframe.component';\nimport { NbGalleryTagComponent } from './nb-gallery-video/nb-gallery-tag.component';\nimport { NbGalleryThumbnailsComponent } from './nb-gallery-thumbnails/nb-gallery-thumbnails.component';\nimport { NbGalleryPreviewComponent } from './nb-gallery-preview/nb-gallery-preview.component';\nimport { NbGalleryComponent } from './nb-gallery.component';\n\nexport * from './nb-gallery.component';\nexport * from './nb-gallery-action/nb-gallery-action.component';\nexport * from './nb-gallery-item/nb-gallery-item.component';\nexport * from './nb-gallery-video/nb-gallery-video.component';\nexport * from './nb-gallery-video/nb-gallery-iframe.component';\nexport * from './nb-gallery-video/nb-gallery-tag.component';\nexport * from './nb-gallery-thumbnails/nb-gallery-thumbnails.component';\nexport * from './nb-gallery-preview/nb-gallery-preview.component';\nexport * from './nb-gallery-arrows/nb-gallery-arrows.component';\nexport * from './nb-gallery-bullets/nb-gallery-bullets.component';\nexport * from './models/nb-gallery-options.model';\nexport * from './models/nb-gallery-item.model';\nexport * from './models/nb-gallery-animation.model';\nexport * from './nb-gallery-helper.service';\nexport * from './models/nb-gallery-image-size.model';\nexport * from './models/nb-gallery-layout.model';\nexport * from './models/nb-gallery-order.model';\nexport * from './models/nb-gallery-ordered-image.model';\nexport * from './models/nb-gallery-action.model';\n\nexport class CustomHammerConfig extends HammerGestureConfig  {\n    overrides = <any>{\n        'pinch': { enable: false },\n        'rotate': { enable: false }\n    };\n}\n\n@NgModule({\n  imports: [\n      CommonModule\n  ],\n  declarations: [\n      NbGalleryActionComponent,\n      NbGalleryArrowsComponent,\n      NbGalleryBulletsComponent,\n      NbGalleryItemComponent,\n      NbGalleryThumbnailsComponent,\n      NbGalleryPreviewComponent,\n      NbGalleryComponent,\n      NbGalleryVideoComponent,\n      NbGalleryIframeComponent,\n      NbGalleryTagComponent\n  ],\n  exports: [\n      NbGalleryComponent\n  ],\n  providers: [\n      { provide: HAMMER_GESTURE_CONFIG, useClass: CustomHammerConfig }\n  ]\n})\n\nexport class NbGalleryModule { }\n"]}